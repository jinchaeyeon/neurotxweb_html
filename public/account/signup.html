<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Infusion Test Analyzer</title>
    <meta name="description" content="Page Title" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, minimal-ui"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- base css -->
    <link
      id="vendorsbundle"
      rel="stylesheet"
      media="screen, print"
      href="/css/vendors.bundle.css"
    />
    <link
      id="appbundle"
      rel="stylesheet"
      media="screen, print"
      href="/css/app.bundle.css"
    />
    <link id="mytheme" rel="stylesheet" media="screen, print" href="#" />
    <link
      id="myskin"
      rel="stylesheet"
      media="screen, print"
      href="/css/skins/skin-master.css"
    />
    <!-- Place favicon.ico in the root directory -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/img/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/img/favicon/favicon-32x32.png"
    />
    <link
      rel="mask-icon"
      href="/img/favicon/safari-pinned-tab.svg"
      color="#5bbad5"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  </head>

  <body style="background-color: #f0f0f0;">
    <div id="wrapper">
      <div class="account">
        <div class="container" id="container" style="display:none;margin-top:20px">

            <h1>
              <a href="/"><img style="outline:none" src="/img/logo.png" alt=""></a>
            </h1>
            <div class="panel">
              <!-- <div class="panel-hdr"></div> -->
              <div class="panel-container">
                <!-- S : FORM -->
                <form id="memberDetail">
                  <div class="panel-content">
                    <!-- s: form-row -->
                    <div class="form-row">


                      <div class="col-md-6 mb-3">
                        <div class="form-group">
                          <label class="form-label" for="id">User Id <i class="valid">*</i></label>
                          <input type="text" name="id" class='form-control validate validation_check' placeholder='User Id' />
                        </div>
                      </div>

                      <div class="col-md-6 mb-3">
                        <div class="form-group">
                          <label class="form-label" for="name">Name <i class="valid">*</i></label>
                          <input type="text" name="name" class='form-control validate validation_check' placeholder='Name' />
                        </div>
                      </div>

                      <div class="col-md-6 mb-6">
                        <div class="form-group">
                          <label class="form-label" for="Password">Password <i class="valid">*</i></label>
                          <input type="password" name="Password" class='form-control validation_check' placeholder='Password' />
                        </div>
                      </div>

                      <div class="col-md-6 mb-6">
                        <div class="form-group">
                          <label class="form-label" for="passwordMatch">Password Check <i class="valid">*</i></label>
                          <input type="password" name="passwordMatch" class='form-control validation_check' placeholder='Password Check' />
                          <div class="invalid-feedback">
                           2 Passwords are not same!
                          </div>
                        </div>
                      </div>

                      <div class="col-md-6 mb-3">
                        <div class="form-group">
                          <label class="form-label" for="LicenseKey">LicenseKey <i class="valid">*</i></label>
                          <input
                            
                            class='form-control validation_check'
                            name="LicenseKey"
                            type="text"
                            placeholder="License Key"
                          />
                        </div>
                      </div>

                      <div class="col-md-6 mb-3">
                        <div class="form-group">
                          <label class="form-label" for="email">E-mail <i class="valid">*</i></label>
                          <input
                            class='form-control validation_check email-valid'
                            name="email"
                            placeholder="E-mail"
                          />
                        </div>
                      </div>

                    </div>
                    <!-- e: form-row -->
                  </div>

                  <div class="panel-content border-faded border-left-0 border-right-0 border-bottom-0">
                    <!-- S : SUBMIT BUTTON -->
                    <div class="btn-box alignR">
                      <a
                        href="javascript:fsubmit();"
                        class="btn btn-primary ml-auto waves-effect waves-themed">
                        Sign Up
                    </a>
                      <a href="/login.html" class="btn btn-secondary ml-auto waves-effect waves-themed">
                        Cancel
                      </a>
                    </div>
                    <!-- E : SUBMIT BUTTON -->
                  </div>
    
                <!-- E : FORM -->
                
              </div>
            </div>
            
            
          </div>
     

        
      </div>

      </div>
    </div>


    <script src="/js/vendors.bundle.js"></script>
    <script src="/js/app.bundle.js"></script>



<!--     <script src="/assets/js/view/account.js"></script> -->
<script>

  const xt=new Date().getTime();
  let s = document.createElement('script');
  s.src = "/js/include.js?var" +xt;
  s.type = 'text/javascript';
  s.async = false;
  //s.defer=true;
  let x = document.getElementsByTagName('script')[document.getElementsByTagName('script').length-1];
  x.parentNode.insertBefore(s, x);

  
  var keyword='';
  var cur_departmentCode="";
  var cur_agencyCode="";
  var curpage=1;
  var cur_Agent_OrganizationCode='';
    
  window.onload=function()
  {

      $("select.validation_check").change(validCheckFunction);
      $("input.validation_check").keyup(validCheckFunction);

  }



    
    
function fsubmit()
{

  



  clear_valid_check();
  
  user_id=validateCheck('input','id');
  user_Password=validateCheck('input','Password');
  passwordMatch=validateCheck('input','passwordMatch');


  if(passwordMatch!=user_Password)
  {
    alert("입력하신 두 개의 비밀번호가 서로 다릅니다.");
   
  }
  else
  {
      
      user_name=validateCheck('input','name');
      LicenseKey=validateCheck('input','LicenseKey');
      email=validateCheck('input','email');
      
      userLevel=4;
      if(isAllValidated())
      {

        if(passwordValidationCheck(user_Password))
        {
          if(emailValidationCheck(email))
          {
          

            
            {
     

                    obj={"password":user_Password,"username":user_id,"email":email,"first_name":user_name,"last_name":"", "is_staff":false};
                    getAPI_withoutUserCode("/users/?license_key="+LicenseKey,obj,function(data){
                      console.log(data);

                        alert("가입되었습니다. 가입하신 정보로 로그인후 이용해 주세요.");
                          window.location='/login.html';
                  },function(errmsg){
                      alert(errmsg.detail);

                  });

            }


        }

      }

    }
  }    
}
function emailValidationCheck(email)
{
  const regExp = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;
  
  if(email != ''){

    if(regExp.test(email)){

    }else{
      alert("이메일 형식이 잘못되었습니다.");
      return false;
    }

  }
  return true;

}
function getToday(){
    var date = new Date();
    var year = date.getFullYear();
    var month = ("0" + (1 + date.getMonth())).slice(-2);
    var day = ("0" + date.getDate()).slice(-2);

    return year + "-" + month + "-" + day;
}
function phoneNumberCorrection()
{
  pn=$("input[name='phoneNumber']").val();
  
  pn=pn.replace(/[^0-9]/g, "").replace(/(^02|^0505|^1[0-9]{3}|^0[0-9]{2})([0-9]+)?([0-9]{4})$/,"$1-$2-$3").replace("--", "-");
  $("input[name='phoneNumber']").val(pn);
}


       window.onload = function(){
      

        $("#container").show();
      } 
    </script>

  </body>
</html>
